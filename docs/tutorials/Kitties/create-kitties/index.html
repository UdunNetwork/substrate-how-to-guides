<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.73">
<link rel="alternate" type="application/rss+xml" href="/substrate-how-to-guides/blog/rss.xml" title="Substrate How-to Guides Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/substrate-how-to-guides/blog/atom.xml" title="Substrate How-to Guides Blog Atom Feed"><title data-react-helmet="true">Part II: Uniqueness, custom types and storage maps | Substrate How-to Guides</title><meta data-react-helmet="true" property="og:url" content="https://substrate-developer-hub.github.io/substrate-how-to-guides/docs/tutorials/Kitties/create-kitties"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Part II: Uniqueness, custom types and storage maps | Substrate How-to Guides"><meta data-react-helmet="true" name="description" content="_In this part of the tutorial, we&#x27;ll build out the components of our pallet"><meta data-react-helmet="true" property="og:description" content="_In this part of the tutorial, we&#x27;ll build out the components of our pallet"><meta data-react-helmet="true" name="keywords" content="pallet design, intermediate, runtime"><link data-react-helmet="true" rel="shortcut icon" href="/substrate-how-to-guides/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://substrate-developer-hub.github.io/substrate-how-to-guides/docs/tutorials/Kitties/create-kitties"><link data-react-helmet="true" rel="alternate" href="https://substrate-developer-hub.github.io/substrate-how-to-guides/docs/tutorials/Kitties/create-kitties" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://substrate-developer-hub.github.io/substrate-how-to-guides/docs/tutorials/Kitties/create-kitties" hreflang="x-default"><link rel="stylesheet" href="/substrate-how-to-guides/assets/css/styles.dd0e7a51.css">
<link rel="preload" href="/substrate-how-to-guides/assets/js/styles.e9379ed2.js" as="script">
<link rel="preload" href="/substrate-how-to-guides/assets/js/runtime~main.51b247e1.js" as="script">
<link rel="preload" href="/substrate-how-to-guides/assets/js/main.8433b945.js" as="script">
<link rel="preload" href="/substrate-how-to-guides/assets/js/1.7fb744e2.js" as="script">
<link rel="preload" href="/substrate-how-to-guides/assets/js/2.8244aaa6.js" as="script">
<link rel="preload" href="/substrate-how-to-guides/assets/js/3.5ed36cbf.js" as="script">
<link rel="preload" href="/substrate-how-to-guides/assets/js/1be78505.4b20ee77.js" as="script">
<link rel="preload" href="/substrate-how-to-guides/assets/js/53.afa340b3.js" as="script">
<link rel="preload" href="/substrate-how-to-guides/assets/js/935f2afb.e1600b54.js" as="script">
<link rel="preload" href="/substrate-how-to-guides/assets/js/51.94fbdf9d.js" as="script">
<link rel="preload" href="/substrate-how-to-guides/assets/js/17896441.b272df17.js" as="script">
<link rel="preload" href="/substrate-how-to-guides/assets/js/86d8a048.5a5b2928.js" as="script">
</head>
<body data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/substrate-how-to-guides/"><img src="/substrate-how-to-guides/img/substrate.png" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/substrate-how-to-guides/img/substrate.png" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Welcome</strong></a><a class="navbar__item navbar__link navbar__link--active" href="/substrate-how-to-guides/docs/intro">How-to Guides</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/substrate-developer-hub/substrate-how-to-guides/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="dsla-search-wrapper"><div class="dsla-search-field"></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/substrate-how-to-guides/"><img src="/substrate-how-to-guides/img/substrate.png" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/substrate-how-to-guides/img/substrate.png" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Welcome</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/substrate-how-to-guides/docs/intro">How-to Guides</a></li><li class="menu__list-item"><a href="https://github.com/substrate-developer-hub/substrate-how-to-guides/" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/substrate-how-to-guides/docs/intro">Welcome</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Basics</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/substrate-how-to-guides/docs/basics/basic-pallet-integration">Basic pallet integration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/substrate-how-to-guides/docs/basics/mint-token">Primitive token mint</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/substrate-how-to-guides/docs/basics/genesis-config-balances">Configuring genesis for Balances</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/substrate-how-to-guides/docs/basics/configurable-constants">Configure a runtime constant</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/substrate-how-to-guides/docs/basics/basic-tx-weight-calculations">Calculating transaction weights</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/substrate-how-to-guides/docs/basics/basic-instantiable-pallets">Basic instantiable pallets</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/substrate-how-to-guides/docs/basics/helper-functions">Using helper functions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/substrate-how-to-guides/docs/basics/publish-pallet">Publish a pallet to its own crate</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Pallet design</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/substrate-how-to-guides/docs/pallet-design/storage-value-struct">Create and use a struct in storage</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/substrate-how-to-guides/docs/pallet-design/simple-crowdfund">Simple crowdfund</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/substrate-how-to-guides/docs/pallet-design/lockable-currency">Simple staking pallet</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/substrate-how-to-guides/docs/pallet-design/add-contracts-pallet">Use the Contracts pallet</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/substrate-how-to-guides/docs/pallet-design/randomness">Generating on-chain randomness</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Weights</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/substrate-how-to-guides/docs/weights/conditional-weight-struct">Conditional weighting struct</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/substrate-how-to-guides/docs/weights/linear-weight-struct">Linear weighting struct</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/substrate-how-to-guides/docs/weights/quadratic-weight-struct">Quadratic weighting struct</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/substrate-how-to-guides/docs/weights/calculate-fees">Calculating fees</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Testing</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/substrate-how-to-guides/docs/testing/test-transfer">Testing a transfer function</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/substrate-how-to-guides/docs/testing/basic-pallet-testing">Setting up tests for your pallet</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Storage Migrations</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/substrate-how-to-guides/docs/storage-migrations/nicks-migration">Basic storage migration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/substrate-how-to-guides/docs/storage-migrations/migration-steps-polkadotjs">Trigger a storage migration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/substrate-how-to-guides/docs/storage-migrations/migration-tests">Migration tests</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/substrate-how-to-guides/docs/storage-migrations/ringbuffer">Ringbuffer queue</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Consensus</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/substrate-how-to-guides/docs/consensus/pow-consensus">Configure a chain to POW consensus</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Parachains</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/substrate-how-to-guides/docs/parachains/overview">Parachains Guide Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Collators</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/substrate-how-to-guides/docs/parachains/a-collators/start-collator-node">Start a collator node and add more collators</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Runtime Upgrades</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/substrate-how-to-guides/docs/parachains/b-runtime-upgrades/runtime-upgrades">Preparing for On-Chain Upgrades</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/substrate-how-to-guides/docs/parachains/b-runtime-upgrades/setup-runtime-and-client">Set-up your runtime and client</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Registration</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/substrate-how-to-guides/docs/parachains/c-registration/register-paraID">How to reserve a ParaID</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/substrate-how-to-guides/docs/parachains/c-registration/register-parachain">How to register your Parachain</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Other</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/substrate-how-to-guides/docs/parachains/e-other/start-testnet">Start a testnet on Roccoco</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Tutorials</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Kitties</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/substrate-how-to-guides/docs/tutorials/Kitties/overview">😺 Substrate Kitties</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/substrate-how-to-guides/docs/tutorials/Kitties/basic-setup">Part I: Basic set-up</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/substrate-how-to-guides/docs/tutorials/Kitties/create-kitties">Part II: Uniqueness, custom types and storage maps</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/substrate-how-to-guides/docs/tutorials/Kitties/dispatchables-and-events">Part III: Dispatchables and Events</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/substrate-how-to-guides/docs/tutorials/Kitties/interacting-functions">Part IV: Interacting with your Kitties</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/substrate-how-to-guides/docs/tutorials/Kitties/kitties-frontend">Part V: Kitties front-end</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Want to Contribute?</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/substrate-how-to-guides/docs/contribute/how-to-template">How-to Template</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Part II: Uniqueness, custom types and storage maps</h1></header><div class="markdown"><p><em>In this part of the tutorial, we&#x27;ll build out the components of our pallet
needed to manage the creation and ownership of our Kitties.</em></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="learning-outcomes"></a>Learning outcomes<a class="hash-link" href="#learning-outcomes" title="Direct link to heading">#</a></h2><p>➡️ Writing a custom struct and using it in storage.</p><p>➡️ Creating a custom type and implementing it for your pallet&#x27;s <code>Config</code> trait.</p><p>➡️ Using the Randomness trait in a helper function.</p><p>➡️ Adding and using <code>StorageMap</code> items to a pallet.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="overview"></a>Overview<a class="hash-link" href="#overview" title="Direct link to heading">#</a></h2><p>This part of the tutorial dives into some pillar concepts for developing pallets with FRAME. Ontop of learning
how to use existing types and traits, you&#x27;ll learn how create your own (<em>FRAME doesn&#x27;t have a concept of Gender!</em>). At the end
of this part, you will have implemented all remaining storage items according to the logic outlined for the Substrate Kitty dApp
<a href="/substrate-how-to-guides/overview">in the overview of this tutorial</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="steps"></a>Steps<a class="hash-link" href="#steps" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="1-create-the-kitty-struct"></a>1. Create the Kitty struct<a class="hash-link" href="#1-create-the-kitty-struct" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="a-what-information-to-include"></a>A. What information to include<a class="hash-link" href="#a-what-information-to-include" title="Direct link to heading">#</a></h4><p>Structs are a useful tool to help carry information that corresponds to the same object.
For our purposes, instead of using separate storage items for each of our Kitty traits,
we can store this information in a single struct. This comes in handy when trying to optimize
for storage reads and writes. Let&#x27;s first go over what information a single Kitty carries:</p><ul><li><strong><code>id</code></strong>: a unique hash to identify each Kitty.</li><li><strong><code>dna</code></strong>: the hash used to identify the DNA of a Kitty, which corresponds to its unique features.
DNA is also used to breed new Kitties and to keep track of different Kitty generations.</li><li><strong><code>price</code></strong>: this is a balance that corresponds to the amount needed to buy a Kitty and
determined by its owner.</li><li><strong><code>gender</code></strong>: an enum that can be either <code>Male</code> or <code>Female</code>.</li></ul><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>You could add whichever additional pieces of information you want to your Kitty struct. In this tutorial, we&#x27;re going to keep things simple.</h5></div><div class="admonition-content"></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="b-writing-out-the-struct"></a>B. Writing out the struct<a class="hash-link" href="#b-writing-out-the-struct" title="Direct link to heading">#</a></h4><p>Now that we know what to include in our Kitty struct, let&#x27;s recap the basics of declaring a struct.</p><p>A struct has the following format:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><div tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">#[derive(Clone, Encode, Decode, Default, PartialEq)]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">pub struct SomeStruct&lt;SomeType1, SomeType2&gt; {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    value_1: SomeType1,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    value_2: SomeType2,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>We use the derive macro to include <a href="https://substrate.dev/rustdocs/v3.0.0/sp_std/prelude/index.html#traits" target="_blank" rel="noopener noreferrer">various helper traits</a> for using our struct.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="c-adding-the-hash-dependency"></a>C. Adding the <code>Hash</code> dependency<a class="hash-link" href="#c-adding-the-hash-dependency" title="Direct link to heading">#</a></h4><p>Looking at the items of our struct from <a href="/substrate-how-to-guides/docs/Tutorials/Kitties/create-kitties#a-what-information-to-include">step 1A</a>, we can deduce the following types: <strong><code>Hash</code></strong> for <code>id</code> and <code>dna</code>; <strong><code>Balance</code></strong> for <code>price</code>; and <strong><code>Gender</code></strong> for <code>gender</code>.</p><p>For <code>Gender</code>, we&#x27;ll need to build out our own custom enum and helper functions. Similarly, <code>Balance</code>
will be something we&#x27;ll later define in our configuration trait. However, we can start by importing
the <code>Hash</code> types from the <code>frame_support</code> library to satisfy <code>id</code> and <code>dna</code>. </p><p>Write this at the top of your pallet where
the dependencies are declared:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><div tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    use frame_support::sp_runtime::traits::{Hash};</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>In doing so, you&#x27;ve given your pallet access to Substrate&#x27;s <a href="https://substrate.dev/rustdocs/v3.0.0/sp_runtime/traits/trait.Hash.html" target="_blank" rel="noopener noreferrer"><code>Hash</code></a> type which will be the type for your Kitty ID and DNA.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Your turn!</h5></div><div class="admonition-content"><p>Now that you know the different types your <code>Kitty</code> struct will require, start writing it!</p><p><strong>HINT</strong>: it will take <code>Hash</code>, <code>Balance</code> and <code>Gender</code> as its types.
Have a look at <a href="/substrate-how-to-guides/docs/pallet-design/storage-value-struct">this how-to guide</a> in case you get stuck.</p></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="d-adding-the-custom-gender-dependency"></a>D. Adding the custom <code>Gender</code> dependency<a class="hash-link" href="#d-adding-the-custom-gender-dependency" title="Direct link to heading">#</a></h4><p>We&#x27;ve just created a struct that requires a custom type called <code>Gender</code>. This type will handle an enum defining our Kitty&#x27;s gender. To create it, you&#x27;ll build out the following parts:</p><ol><li><strong>An enum declaration</strong>, which specifies <code>Male</code> and <code>Female</code> values.</li><li><strong>A function to configure a defaut value</strong>, based on the enum.</li></ol><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>Setting up our <code>Gender</code> enum using a function to configure its default  value will allow us to derive a Kitty&#x27;s gender by passing in the randomness
created by each Kitty&#x27;s DNA.</p></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="e-enums"></a>E. Enums<a class="hash-link" href="#e-enums" title="Direct link to heading">#</a></h4><p>Writing enums requires us to use the <a href="https://doc.rust-lang.org/reference/procedural-macros.html#derive-macros" target="_blank" rel="noopener noreferrer">derive macro</a> which must precede the enum declaration.</p><p>A typical enum would be structured as such:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><div tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    #[derive(Encode, Decode, Debug, Clone, PartialEq)]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pub enum TypicalEnum {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        One,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        Two,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Then, we can write out the default implementation by using Rust&#x27;s <a href="https://doc.rust-lang.org/std/default/trait.Default.html" target="_blank" rel="noopener noreferrer"><code>Default</code> trait</a>.
This would look something like this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><div tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    impl Default for TypicalEnum {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        fn default() -&gt; Self {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            TypicalEnum::One</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><blockquote><p>💡 <strong>It&#x27;s like saying:</strong> let&#x27;s give our enum a special trait that allows us to initialize it to a specific value.</p></blockquote><p>Great, we now know how to create a custom struct and specify its default value. But what about providing
a way for a Kitty struct to be assigned a gender value? For that we need to learn one more thing.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="f-configuring-functions-for-our-kitty-struct"></a>F. Configuring functions for our Kitty struct<a class="hash-link" href="#f-configuring-functions-for-our-kitty-struct" title="Direct link to heading">#</a></h4><p>Configuring a struct is useful in order to pre-define a value in our struct. For example, if we want to
set a value according to what another function returns. In our case we have a similar situation where
we need to configure our Kitty struct in such a way that sets <code>Gender</code> according to a Kitty&#x27;s DNA. We&#x27;ll
only be using this function when we get to creating Kitties but let&#x27;s first learn how to write it and get it out
of the way.</p><p>When you&#x27;re implementing the configuration trait for a struct inside a FRAME pallet, you&#x27;re doing the
same type of thing as implementing some trait for an enum except you&#x27;re implementing the generic
configuration trait, <code>Config</code>.</p><p>Building off our previous example, this would look like:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><div tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">impl&lt;T: Config&gt; TypicalEnum {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        pub fn special_function(some_hash: T::Hash) -&gt; TypicalEnum {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            if some_hash.as_ref()[0] % 2 == 0 {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                TypicalEnum::One</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            } else {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                TypicalEnum::Two</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Now whenever <code>special_function</code> is called inside our pallet, it will return the enum value associated with
the function&#x27;s logic.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Your turn!</h5></div><div class="admonition-content"><p>Write out the <code>Gender</code> enum, trait implementations and <code>Config</code> implementation to define the behaviour
of <code>Gender</code> for our <code>Kitties</code> struct.</p><p><strong>Hint</strong>: reuse the logic in <code>special_function</code> — that&#x27;s how we&#x27;ll retrieve the gender of our Kitties!</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="2-implement-on-chain-randomness"></a>2. Implement on-chain randomness<a class="hash-link" href="#2-implement-on-chain-randomness" title="Direct link to heading">#</a></h3><p>If we want to be able to tell these Kitties apart, we need to start giving them unique properties!
For our dApp, we need to generate a unique ID for each Kitty and some random DNA.</p><p>We&#x27;ll be using the <a href="https://substrate.dev/rustdocs/v3.0.0/frame_support/traits/trait.Randomness.html" target="_blank" rel="noopener noreferrer">Randomness trait</a> from <code>frame_support</code> to generate a random seed which we&#x27;ll need
to breed and create new unique Kitties. Alongside this trait, we&#x27;ll also need a nonce which we&#x27;ll create as a separate function
and a hashing function which we&#x27;ll get by using the <a href="https://substrate.dev/rustdocs/v3.0.0/sp_runtime/traits/trait.Hash.html" target="_blank" rel="noopener noreferrer"><code>Hash</code> trait</a> that we imported in <a href="/substrate-how-to-guides/docs/Tutorials/Kitties/create-kitties#c-adding-the-hash-dependency">step 1C</a>.</p><p>Here&#x27;s what our random hashing function looks like:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><div tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">        fn random_hash(sender: &amp;T::AccountId) -&gt; T::Hash {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            let nonce = &lt;Nonce&lt;T&gt;&gt;::get();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            let seed = T::Randomness::random_seed();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            T::Hashing::hash_of(&amp;(seed, &amp;sender, nonce))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>In order to implement the <code>Randomness</code> trait for our runtime, we must:</p><p><strong>1. Specify it in our pallet&#x27;s configuration trait.</strong></p><p>The <code>Randomness</code> trait from <code>frame_support</code> requires specifying it with a paramater to replace the <code>Output</code> generic.
Take a look at the documentation and the source code implementation to understand how this works. For our purposes,
we want the output of functions using this trait to be <a href="https://substrate.dev/rustdocs/v3.0.0/sp_core/struct.H256.html" target="_blank" rel="noopener noreferrer"><code>H256</code></a>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><div tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">type KittyRandomness: Randomness&lt;H256&gt;;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p><strong>2. Specify it for our runtime.</strong></p><p>Given that we&#x27;re adding a new type for the configuration of our pallet, we need to tell our runtime about its implementation.
This could come in handy if ever we wanted to change the algorithm that <code>KittyRandomness</code> is using, without needing to
modify where it&#x27;s used inside our pallet.</p><p>To showcase this point, we&#x27;re going to implement <code>KittyRandomness</code> by assigning it to an instance of <a href="https://substrate.dev/rustdocs/v3.0.0/pallet_randomness_collective_flip/index.html" target="_blank" rel="noopener noreferrer">FRAME&#x27;s <code>RandomnessCollectiveFlip</code></a>.
This requires you to integrate the <code>RandomnessCollectiveFlip</code> pallet to your runtime and implement it. Once you do that, inside your
<code>runtime/src/lib.rs</code> file, include the <code>KittyRandomness</code> type for your runtime:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><div tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">impl pallet_kitties::Config for Runtime {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    type KittyRandomness = RandomCollectiveFlip;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>Check out this <a href="/substrate-how-to-guides/docs/pallet-design/randomness">how-to guide</a> on implementing randomness in case you get stuck.</p></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="nonce"></a>Nonce<a class="hash-link" href="#nonce" title="Direct link to heading">#</a></h4><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>why our random hashing function needs a nonce</h5></div><div class="admonition-content"><p>Our goal is to create as much entropy as we can for <code>hash_of</code> to produce enough randomness when creating Kitty IDs and DNA.
Since <code>random_seed()</code> does not change for multiple transactions in the same
block, and since it may not even generate a
random seed for the first 80 blocks, we need to create a nonce for our pallet to manage and use in our private <code>random_hash</code> function.  </p></div></div><p>We&#x27;ll use the nonce provided by <a href="https://substrate.dev/rustdocs/v3.0.0/frame_system/struct.AccountInfo.html#structfield.nonce" target="_blank" rel="noopener noreferrer"><code>frame_system::AccountInfo</code></a> and create a storage item to keep track of it as we modify it.</p><p>So we&#x27;ll need to do a couple things.</p><p>First, create a storage item for the nonce value:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><div tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    #[pallet::storage]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    #[pallet::getter(fn get_nonce)]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pub(super) type Nonce&lt;T: Config&gt; = StorageValue&lt;_, u64, ValueQuery&gt;;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Second, create a function that increments the nonce:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><div tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">fn increment_nonce() -&gt; DispatchResult {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &lt;Nonce&lt;T&gt;&gt;::try_mutate(|nonce| {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                let next = nonce.checked_add(1).ok_or(Error::&lt;T&gt;::NonceOverflow)?;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                *nonce = next;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                Ok(().into())</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            })</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Your turn!</h5></div><div class="admonition-content"><p>Feel free to use the code snippets above. Make sure to
include the <code>Nonce</code> storage item among the section with your other storage items, and the
<code>increment_nonce()</code> function in the helper function section.</p></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="unique-kitty-id"></a>Unique Kitty ID<a class="hash-link" href="#unique-kitty-id" title="Direct link to heading">#</a></h4><p>To easily track all of our kitties, it would be helpful to standardize our logic to use a unique id as the global key
for our storage items. This means that a single unique key will point to our Kitty object, and all other links to ownership
will point to that key.</p><p>The ID on the Kitty object will serve that purpose, but we need to make sure that the ID for a new Kitty is always unique.
We can do this with a new storage item <code>Kitties</code> which will be a mapping from an ID (Hash) to the Kitty object.</p><p>With this object, we can easily check for collisions by simply checking whether this storage item already contains a mapping
using a particular ID. For example, from inside a dispatchable function we could check using:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><div tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ensure!(!&lt;Kitties&lt;T&gt;&gt;::exists(new_id), &quot;This new id already exists&quot;);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>You&#x27;ll be implementing the <code>StorageMap</code> for <code>Kitties</code> in the next section. </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="3-include-storage-items"></a>3. Include storage items<a class="hash-link" href="#3-include-storage-items" title="Direct link to heading">#</a></h3><p>We&#x27;ll be needing a total of 9 storage items
for our Kitty pallet. We already included <code>Nonce</code> and we&#x27;ve already created the basis for
our Kitty object — we just need to implement a way to keep track of them now!</p><p>Our pallet&#x27;s logic can best be understood
by examining the storage items we&#x27;ll be using. In other words, the way we define the conditions
for reading and writing to our runtime&#x27;s storage
helps us breakdown the items we&#x27;ll need to enable NFT capabilities. In our case, we care about state transitions and persistance around two main concepts our runtime needs to be made aware of:</p><ol><li>unique assets, like currency or Kitties</li><li>helper datastructures, like the nonce, counters or account maps</li></ol><p>This already starts to lay the foundations for our Kitty pallet logic. But there&#x27;s an important layer beneath these two concepts: our runtime needs to have a sense of asset ownership as well as the ability to keep track of changes in ownership and owned quantities.</p><p>In our application, ontop of keeping a single storage instance for Kitty objects, we need a number of storage items to keep track of:</p><ul><li>Kitties in existence</li><li>Owned Kitties</li></ul><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>The overarching pattern here is to keep track of <em>who</em> and <em>what</em>. </h5></div><div class="admonition-content"><p>This boils down to the following storage items (in addition to <code>Kitties</code> and <code>Nonce</code>):</p><p><strong>Tracking ownership</strong></p><ul><li><code>&lt;KittyOwner&lt;T&gt;&gt;</code>: Keeps track of what accounts own what Kitty.</li><li><code>&lt;OwnedKittiesArray&lt;T&gt;&gt;</code>: Keep track of who a Kitty is owned by.</li><li><code>&lt;OwnedKittiesCount&lt;T&gt;&gt;</code>: Keeps track of the total amount of Kitties owned.</li><li><code>&lt;OwnedKittiesIndex&lt;T&gt;&gt;</code>: Keeps track of all owned Kitties by index.</li></ul><p><strong>Tracking existing Kitties</strong></p><ul><li><code>&lt;AllKittiesArray&lt;T&gt;&gt;</code>: An index to track of all Kitties.</li><li><code>&lt;AllKittiesCount&lt;T&gt;&gt;</code>: Stores the total amount of Kitties in existence.</li><li><code>&lt;AllKittiesIndex&lt;T&gt;&gt;</code>: Keeps track of all the Kitties.</li></ul></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="using-a-storagemap"></a>Using a <code>StorageMap</code><a class="hash-link" href="#using-a-storagemap" title="Direct link to heading">#</a></h4><p>Every storage item declaration will follow a similar
pattern as when we wrote the storage item for <code>Nonce</code>. The only difference is which data structure type each storage item requires.</p><p>To create a storage instance for the Kitty struct,
we&#x27;ll be using <code>StorageMap</code> — a hash-map provided
to us by FRAME. This differs from the storage instance we created for
<code>Nonce</code> which, because we want it to keep track of a single <code>u64</code> value, we used <code>StorageValue</code>. Here, we need our storage to keep track
of the mapping hash IDs and Kitty objects.</p><p>Here&#x27;s the basic pattern for declaring a storage map storage item, showing the storage for Kitty objects as an example:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><div tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    #[pallet::storage]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    #[pallet::getter(fn kitty)]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pub(super) type Kitties&lt;T: Config&gt; =</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        StorageMap&lt;_, Twox64Concat, T::Hash, Kitty&lt;T::Hash, T::Balance&gt;, ValueQuery&gt;;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Breaking it down, we declare the storage type and assign a <code>StorageMap</code> that takes:</p><ul><li>The <a href="https://substrate.dev/rustdocs/v3.0.0/frame_support/struct.Twox64Concat.html" target="_blank" rel="noopener noreferrer"><code>Twox64Concat</code></a> hashing algorithm.</li><li>A key of type <code>T::Hash</code>.</li><li>A value of type <code>Kitty&lt;T::Hash, T::Balance&gt;</code>.</li></ul><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Your turn!</h5></div><div class="admonition-content"><p>Use the storage items outlined above to help you finish writing the remaining storage items. Follow the same pattern
we used for <code>Nonce</code> and <code>Kitties</code> — just remember what type each item is meant to store!</p><p><strong>HINT</strong>: Remember to include a getter function for each storage item — except those handling indices) .</p></div></div><p>Assuming you&#x27;ve finished implementing all of your storage items, now&#x27;s a good time to check that your pallet compiles correctly:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><div tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">cargo build -p pallet-kitties</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Congratulations! </h5></div><div class="admonition-content"><p>If you&#x27;ve made it this far, you now have the foundations for your pallet to
handle the creation and ownership of your Kitties! In this part of the tutorial, we&#x27;ve learnt:</p><ul><li>How to write a struct and use it in a <code>StorageMap</code>.</li><li>How to implement a custom type.</li><li>How to set a default enum value for a custom type.</li><li>How to create a function to set a value for that custom type.</li><li>How to implement the Randomness trait to write a function that generates randomness using a nonce.</li><li>How to write <code>StorageMap</code> storage items.</li></ul></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="next-steps"></a>Next steps<a class="hash-link" href="#next-steps" title="Direct link to heading">#</a></h2><ul><li>Create a dispatchable function that mints a new Kitty</li><li>Create a helper function to handle storage updates</li><li>Create and use Events</li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/substrate-developer-hub/substrate-how-to-guides/edit/main/docs/08-tutorials/01-Kitties/create-kitties.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/substrate-how-to-guides/docs/tutorials/Kitties/basic-setup"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Part I: Basic set-up</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/substrate-how-to-guides/docs/tutorials/Kitties/dispatchables-and-events"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Part III: Dispatchables and Events »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#learning-outcomes" class="table-of-contents__link">Learning outcomes</a></li><li><a href="#overview" class="table-of-contents__link">Overview</a></li><li><a href="#steps" class="table-of-contents__link">Steps</a><ul><li><a href="#1-create-the-kitty-struct" class="table-of-contents__link">1. Create the Kitty struct</a></li><li><a href="#2-implement-on-chain-randomness" class="table-of-contents__link">2. Implement on-chain randomness</a></li><li><a href="#3-include-storage-items" class="table-of-contents__link">3. Include storage items</a></li></ul></li><li><a href="#next-steps" class="table-of-contents__link">Next steps</a></li></ul></div></div></div><div><fieldset class="MuiBox-root jss31"><legend class="MuiTypography-root MuiTypography-body1">Was this guide useful?</legend><span class="MuiRating-root"><label class="MuiRating-label" for="customized-icons-1"><span class="MuiRating-icon MuiRating-iconFilled"><svg class="MuiSvgIcon-root" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><circle cx="15.5" cy="9.5" r="1.5"></circle><circle cx="8.5" cy="9.5" r="1.5"></circle><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm0-6c-2.33 0-4.32 1.45-5.12 3.5h1.67c.69-1.19 1.97-2 3.45-2s2.75.81 3.45 2h1.67c-.8-2.05-2.79-3.5-5.12-3.5z"></path></svg></span><span class="MuiRating-visuallyhidden">Very Dissatisfied</span></label><input type="radio" value="1" id="customized-icons-1" name="customized-icons" class="MuiRating-visuallyhidden"><label class="MuiRating-label" for="customized-icons-2"><span class="MuiRating-icon MuiRating-iconFilled"><svg class="MuiSvgIcon-root" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><circle cx="15.5" cy="9.5" r="1.5"></circle><circle cx="8.5" cy="9.5" r="1.5"></circle><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm0-3.5c.73 0 1.39.19 1.97.53.12-.14.86-.98 1.01-1.14-.85-.56-1.87-.89-2.98-.89-1.11 0-2.13.33-2.99.88.97 1.09.01.02 1.01 1.14.59-.33 1.25-.52 1.98-.52z"></path></svg></span><span class="MuiRating-visuallyhidden">Dissatisfied</span></label><input type="radio" value="2" id="customized-icons-2" name="customized-icons" checked="" class="MuiRating-visuallyhidden"><label class="MuiRating-label" for="customized-icons-3"><span class="MuiRating-icon MuiRating-iconEmpty"><svg class="MuiSvgIcon-root" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><circle cx="15.5" cy="9.5" r="1.5"></circle><circle cx="8.5" cy="9.5" r="1.5"></circle><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm0-4c-.73 0-1.38-.18-1.96-.52-.12.14-.86.98-1.01 1.15.86.55 1.87.87 2.97.87 1.11 0 2.12-.33 2.98-.88-.97-1.09-.01-.02-1.01-1.15-.59.35-1.24.53-1.97.53z"></path></svg></span><span class="MuiRating-visuallyhidden">Neutral</span></label><input type="radio" value="3" id="customized-icons-3" name="customized-icons" class="MuiRating-visuallyhidden"><label class="MuiRating-label" for="customized-icons-4"><span class="MuiRating-icon MuiRating-iconEmpty"><svg class="MuiSvgIcon-root" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><circle cx="15.5" cy="9.5" r="1.5"></circle><circle cx="8.5" cy="9.5" r="1.5"></circle><path d="M12 16c-1.48 0-2.75-.81-3.45-2H6.88c.8 2.05 2.79 3.5 5.12 3.5s4.32-1.45 5.12-3.5h-1.67c-.69 1.19-1.97 2-3.45 2zm-.01-14C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"></path></svg></span><span class="MuiRating-visuallyhidden">Satisfied</span></label><input type="radio" value="4" id="customized-icons-4" name="customized-icons" class="MuiRating-visuallyhidden"><label class="MuiRating-label" for="customized-icons-5"><span class="MuiRating-icon MuiRating-iconEmpty"><svg class="MuiSvgIcon-root" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><circle cx="15.5" cy="9.5" r="1.5"></circle><circle cx="8.5" cy="9.5" r="1.5"></circle><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm-5-6c.78 2.34 2.72 4 5 4s4.22-1.66 5-4H7z"></path></svg></span><span class="MuiRating-visuallyhidden">Very Satisfied</span></label><input type="radio" value="5" id="customized-icons-5" name="customized-icons" class="MuiRating-visuallyhidden"></span></fieldset></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Learn Substrate</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/substrate-how-to-guides/docs/intro">How-to Guides</a></li><li class="footer__item"><a class="footer__link-item" href="/substrate-how-to-guides/docs/tutorials/kitties/overview">Tutorials</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">The Substrate How-to Guides are GPL 3.0 Licensed, open source and open for contributions.</div></div></div></footer></div>
<script src="/substrate-how-to-guides/assets/js/styles.e9379ed2.js"></script>
<script src="/substrate-how-to-guides/assets/js/runtime~main.51b247e1.js"></script>
<script src="/substrate-how-to-guides/assets/js/main.8433b945.js"></script>
<script src="/substrate-how-to-guides/assets/js/1.7fb744e2.js"></script>
<script src="/substrate-how-to-guides/assets/js/2.8244aaa6.js"></script>
<script src="/substrate-how-to-guides/assets/js/3.5ed36cbf.js"></script>
<script src="/substrate-how-to-guides/assets/js/1be78505.4b20ee77.js"></script>
<script src="/substrate-how-to-guides/assets/js/53.afa340b3.js"></script>
<script src="/substrate-how-to-guides/assets/js/935f2afb.e1600b54.js"></script>
<script src="/substrate-how-to-guides/assets/js/51.94fbdf9d.js"></script>
<script src="/substrate-how-to-guides/assets/js/17896441.b272df17.js"></script>
<script src="/substrate-how-to-guides/assets/js/86d8a048.5a5b2928.js"></script>
</body>
</html>